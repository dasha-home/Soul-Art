<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Хранитель — Даша Художник</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="guardian.css" />
</head>
<body class="guardian-page">
  <div id="globe-container" class="globe-fixed"></div>

  <!-- Фон: самурай у костра -->
  <div class="samurai-bg" aria-hidden="true">
    <div class="samurai-bg__image"></div>
    <div class="samurai-bg__overlay"></div>
    <div class="samurai-bg__fire-glow"></div>
    <!-- Искры над костром -->
    <div class="sparks" aria-hidden="true">
      <div class="spark" style="--tx:-18px;--duration:2.2s;--delay:0.0s;left:28%"></div>
      <div class="spark" style="--tx: 22px;--duration:1.9s;--delay:0.5s;left:31%"></div>
      <div class="spark" style="--tx: -9px;--duration:2.6s;--delay:1.0s;left:26%"></div>
      <div class="spark" style="--tx: 28px;--duration:1.7s;--delay:1.4s;left:33%"></div>
      <div class="spark" style="--tx:-22px;--duration:2.4s;--delay:0.8s;left:29%"></div>
      <div class="spark" style="--tx: 12px;--duration:2.1s;--delay:1.7s;left:27%"></div>
      <div class="spark" style="--tx:-14px;--duration:1.8s;--delay:0.3s;left:34%"></div>
      <div class="spark" style="--tx: 18px;--duration:2.3s;--delay:2.0s;left:25%"></div>
    </div>
  </div>

  <!-- Шапка -->
  <header class="guardian-header">
    <a href="index.html" class="guardian-header__back" data-i18n="guardian_back">← На главную</a>
    <nav class="guardian-header__nav">
      <a href="stories.html" class="guardian-header__link" data-i18n="nav_stories">Рассказы</a>
      <a href="index.html#about" class="guardian-header__link" data-i18n="nav_about">О Даше</a>
    </nav>
  </header>

  <!-- Имя самурая (левая сторона, видно на десктопе) -->
  <div class="samurai-identity" aria-hidden="true">
    <div class="samurai-identity__kanji">守護者</div>
    <div class="samurai-identity__ru" data-i18n="guardian_title">Хранитель</div>
    <div class="samurai-identity__roles">
      <span data-i18n="guardian_role_lang">Языки</span>
      <span class="samurai-identity__dot">·</span>
      <span data-i18n="guardian_role_art">Рисование</span>
      <span class="samurai-identity__dot">·</span>
      <span data-i18n="guardian_role_soul">Душа</span>
    </div>
  </div>

  <!-- Чат-панель -->
  <div class="samurai-chat-panel">
    <div class="chat-inner">

      <!-- Режимы -->
      <div class="guardian-mode" role="group" aria-label="Режим разговора">
        <button type="button" class="guardian-mode__btn guardian-mode__btn--active"
          data-mode="assistant" data-i18n="guardian_mode_assistant">С Дашей</button>
        <button type="button" class="guardian-mode__btn"
          data-mode="language" data-i18n="guardian_mode_language">Языки</button>
        <button type="button" class="guardian-mode__btn"
          data-mode="art" data-i18n="guardian_mode_art">Рисование</button>
        <button type="button" class="guardian-mode__btn"
          data-mode="psychology" data-i18n="guardian_mode_psychology">Душа</button>
      </div>

      <!-- Сообщения -->
      <div class="guardian-chat__messages" id="guardian-messages" role="log" aria-live="polite">
        <div class="guardian-msg guardian-msg--bot">
          <div class="guardian-msg__avatar" aria-hidden="true">✦</div>
          <div class="guardian-msg__bubble">
            <p class="guardian-msg__text" data-i18n="guardian_welcome">Здравствуй. Я — Хранитель. Я здесь, чтобы говорить с тобой о том, что важно: о языках, о рисунках, о душе. Просто напиши — я слушаю.</p>
          </div>
        </div>
      </div>

      <!-- Поле ввода -->
      <div class="guardian-chat__input-wrap">
        <textarea
          id="guardian-input"
          class="guardian-chat__input"
          rows="2"
          placeholder="Напиши Хранителю…"
          data-i18n-placeholder="guardian_placeholder"
          aria-label="Сообщение Хранителю"
        ></textarea>
        <button type="button" id="guardian-send" class="guardian-chat__send" aria-label="Отправить">
          <span aria-hidden="true">→</span>
        </button>
      </div>
      <p class="guardian-chat__hint" data-i18n="guardian_hint">Хранитель помнит контекст разговора</p>
    </div>
  </div>

  <div id="atmosphere-widget" class="atmosphere-widget" aria-label="Настройки атмосферы"></div>

  <script src="i18n.js" defer></script>
  <script src="atmosphere.js" defer></script>
  <script src="guardian.js" defer></script>
  <script>
    (function () {
      function init() {
        if (!window.I18n) return;
        var container = document.getElementById("globe-container");
        if (container) window.I18n.init(container);
        else window.I18n.applyToPage();
        setTimeout(function () { if (window.I18n) window.I18n.applyToPage(); }, 0);
      }
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
